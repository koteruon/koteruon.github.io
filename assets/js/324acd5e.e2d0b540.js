"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2322],{26301:(n,e,s)=>{s.d(e,{A:()=>l});const l=s.p+"assets/images/pv-relation-23d0b343efdb7b38da71431b064441e2.svg"},28453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>c});var l=s(96540);const i={},r=l.createContext(i);function d(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),l.createElement(r.Provider,{value:e},n.children)}},81283:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>o,frontMatter:()=>d,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"notes/kubernetes-basics/volume-pv-and-pvc","title":"Volume - PV & PVC","description":"\u4ec0\u9ebc\u662f Storage Class\uff1f","source":"@site/docs/notes/kubernetes-basics/20-volume-pv-and-pvc.mdx","sourceDirName":"notes/kubernetes-basics","slug":"/notes/kubernetes-basics/volume-pv-and-pvc","permalink":"/docs/notes/kubernetes-basics/volume-pv-and-pvc","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":20,"frontMatter":{},"sidebar":"notesSidebar","previous":{"title":"Volume - Secret","permalink":"/docs/notes/kubernetes-basics/volume-secret"},"next":{"title":"Resources - Resource","permalink":"/docs/notes/kubernetes-basics/resources-resource"}}');var i=s(74848),r=s(28453);const d={},c="Volume - PV & PVC",h={},t=[{value:"\u4ec0\u9ebc\u662f Storage Class\uff1f",id:"\u4ec0\u9ebc\u662f-storage-class",level:2},{value:"Storage Class \u7684\u512a\u52e2",id:"storage-class-\u7684\u512a\u52e2",level:3},{value:"Storage Class \u7684\u7d50\u69cb",id:"storage-class-\u7684\u7d50\u69cb",level:3},{value:"\u5e38\u898b\u7684 Provisioner",id:"\u5e38\u898b\u7684-provisioner",level:3},{value:"reclaimPolicy \u8a73\u7d30\u4ecb\u7d39",id:"reclaimpolicy-\u8a73\u7d30\u4ecb\u7d39",level:3},{value:"1. Retain",id:"1-retain",level:4},{value:"2. Delete",id:"2-delete",level:4},{value:"Storage Class \u7684\u4f7f\u7528\u6d41\u7a0b",id:"storage-class-\u7684\u4f7f\u7528\u6d41\u7a0b",level:3},{value:"\u4ec0\u9ebc\u662f PV\uff08Persistent Volume\uff09\uff1f",id:"\u4ec0\u9ebc\u662f-pvpersistent-volume",level:2},{value:"PV \u7684\u7279\u6027",id:"pv-\u7684\u7279\u6027",level:3},{value:"PV \u7684\u751f\u547d\u5468\u671f\u72c0\u614b",id:"pv-\u7684\u751f\u547d\u5468\u671f\u72c0\u614b",level:3},{value:"\u72c0\u614b\u9077\u79fb",id:"\u72c0\u614b\u9077\u79fb",level:4},{value:"\u4ec0\u9ebc\u662f PVC\uff08Persistent Volume Claim\uff09\uff1f",id:"\u4ec0\u9ebc\u662f-pvcpersistent-volume-claim",level:2},{value:"PVC \u7684\u7279\u6027",id:"pvc-\u7684\u7279\u6027",level:3},{value:"PVC \u8a2a\u554f\u6a21\u5f0f\u4ecb\u7d39",id:"pvc-\u8a2a\u554f\u6a21\u5f0f\u4ecb\u7d39",level:3},{value:"1. ReadWriteOnce (RWO)",id:"1-readwriteonce-rwo",level:4},{value:"2. ReadWriteMany (RWX)",id:"2-readwritemany-rwx",level:4},{value:"3. ReadOnlyMany (ROX)",id:"3-readonlymany-rox",level:4},{value:"4. ReadWriteOncePod (RWOP) <em>(Kubernetes v1.22 \u53ca\u4e4b\u5f8c\u7684\u7248\u672c)</em>",id:"4-readwriteoncepod-rwop-kubernetes-v122-\u53ca\u4e4b\u5f8c\u7684\u7248\u672c",level:4},{value:"PVC \u8a2a\u554f\u6a21\u5f0f\u6bd4\u8f03",id:"pvc-\u8a2a\u554f\u6a21\u5f0f\u6bd4\u8f03",level:3},{value:"PVC \u5132\u5b58\u985e\u578b\u4ecb\u7d39",id:"pvc-\u5132\u5b58\u985e\u578b\u4ecb\u7d39",level:3},{value:"1. \u584a\u5b58\u5132 (Block Storage)",id:"1-\u584a\u5b58\u5132-block-storage",level:4},{value:"2. \u6587\u4ef6\u5b58\u5132 (File Storage)",id:"2-\u6587\u4ef6\u5b58\u5132-file-storage",level:4},{value:"3. \u7269\u4ef6\u5b58\u5132 (Object Storage)",id:"3-\u7269\u4ef6\u5b58\u5132-object-storage",level:4},{value:"4. \u672c\u5730\u5b58\u5132 (Local Storage)",id:"4-\u672c\u5730\u5b58\u5132-local-storage",level:4},{value:"5. \u52d5\u614b\u5b58\u5132 (Dynamic Provisioning)",id:"5-\u52d5\u614b\u5b58\u5132-dynamic-provisioning",level:4},{value:"PVC \u5132\u5b58\u985e\u578b\u6bd4\u8f03",id:"pvc-\u5132\u5b58\u985e\u578b\u6bd4\u8f03",level:3},{value:"PVC \u7684\u4f7f\u7528\u6d41\u7a0b",id:"pvc-\u7684\u4f7f\u7528\u6d41\u7a0b",level:3},{value:"\u4e09\u8005\u4e4b\u9593\u7684\u95dc\u4fc2",id:"\u4e09\u8005\u4e4b\u9593\u7684\u95dc\u4fc2",level:2},{value:"\u6d41\u7a0b\u9806\u5e8f",id:"\u6d41\u7a0b\u9806\u5e8f",level:3},{value:"\u5be6\u4f5c PV &amp; PVC",id:"\u5be6\u4f5c-pv--pvc",level:2},{value:"\u9810\u8a2d\u7684 StorageClass",id:"\u9810\u8a2d\u7684-storageclass",level:3},{value:"\u5efa\u7acb PVC",id:"\u5efa\u7acb-pvc",level:3},{value:"\u5efa\u7acb\u5169\u500b\u670d\u52d9\u4f7f\u7528\u76f8\u540c PVC",id:"\u5efa\u7acb\u5169\u500b\u670d\u52d9\u4f7f\u7528\u76f8\u540c-pvc",level:3},{value:"\u522a\u9664 PVC \u5f8c PV \u81ea\u52d5\u522a\u9664",id:"\u522a\u9664-pvc-\u5f8c-pv-\u81ea\u52d5\u522a\u9664",level:3},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}];function x(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"volume---pv--pvc",children:"Volume - PV & PVC"})}),"\n",(0,i.jsx)(e.h2,{id:"\u4ec0\u9ebc\u662f-storage-class",children:"\u4ec0\u9ebc\u662f Storage Class\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 Kubernetes \u4e2d\uff0c",(0,i.jsx)(e.strong,{children:"Storage Class"}),"\uff08\u5b58\u5132\u985e\u5225\uff09\u662f\u4e00\u7a2e\u8cc7\u6e90\u7269\u4ef6\uff0c\u5b9a\u7fa9\u4e86\u5982\u4f55\u52d5\u614b\u914d\u7f6e\u6301\u4e45\u6027\u5b58\u5132\uff08Persistent Volume, PV\uff09\u3002\n\u5b83\u70ba\u4e0d\u540c\u7684\u5b58\u5132\u9700\u6c42\u63d0\u4f9b\u62bd\u8c61\uff0c\u5141\u8a31\u7528\u6236\u5b9a\u7fa9\u5b58\u5132\u7684\u914d\u7f6e\u7d30\u7bc0\uff0c\u4f8b\u5982\u6027\u80fd\u3001\u5099\u4efd\u7b56\u7565\u6216\u5b58\u5132\u985e\u578b\uff08\u5982 SSD \u6216 HDD\uff09\u3002"]}),"\n",(0,i.jsx)(e.h3,{id:"storage-class-\u7684\u512a\u52e2",children:"Storage Class \u7684\u512a\u52e2"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u52d5\u614b\u914d\u7f6e PV"}),"\uff1a\u900f\u904e Storage Class\uff0c\u53ef\u4ee5\u6839\u64da Persistent Volume Claim\uff08PVC\uff09\u7684\u9700\u6c42\uff0c\u81ea\u52d5\u5275\u5efa PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9748\u6d3b\u6027"}),"\uff1a\u652f\u6301\u4e0d\u540c\u7684\u5b58\u5132\u5f8c\u7aef\uff08\u5982\u96f2\u63d0\u4f9b\u5546\u7684\u78c1\u789f\u3001\u5206\u4f48\u5f0f\u5b58\u5132\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7c21\u5316\u64cd\u4f5c"}),"\uff1a\u7528\u6236\u4e0d\u9700\u624b\u52d5\u5275\u5efa PV\uff0c\u53ea\u9700\u5b9a\u7fa9\u5b58\u5132\u9700\u6c42\uff0cKubernetes \u6703\u81ea\u52d5\u5339\u914d\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"storage-class-\u7684\u7d50\u69cb",children:"Storage Class \u7684\u7d50\u69cb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"apiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: fast-storage\nprovisioner: kubernetes.io/aws-ebs # \u4f7f\u7528 AWS EBS \u4f5c\u70ba\u5b58\u5132\u5f8c\u7aef\u3002\nparameters:\n  type: gp2 # \u4f7f\u7528 AWS \u7684\u901a\u7528 SSD \u78c1\u789f\u3002\n  fsType: ext4 # \u6587\u4ef6\u7cfb\u7d71\u683c\u5f0f\u3002\nreclaimPolicy: Retain # \u8a2d\u5b9a\u70ba Retain\uff0c\u8868\u793a PV \u88ab\u91cb\u653e\u5f8c\u4e0d\u6703\u81ea\u52d5\u522a\u9664\u3002\nallowVolumeExpansion: true # \u5141\u8a31 PVC \u52d5\u614b\u64f4\u5c55\u5b58\u5132\u5927\u5c0f\u3002\nvolumeBindingMode: WaitForFirstConsumer # \u8a2d\u5b9a\u70ba WaitForFirstConsumer\uff0cPV \u6703\u5728 Pod \u9700\u8981\u6642\u624d\u9032\u884c\u7d81\u5b9a\u3002\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"provisioner"}),"\uff1a\u6307\u5b9a\u5b58\u5132\u5f8c\u7aef\u63d2\u4ef6\uff08\u4f8b\u5982 AWS EBS\u3001GCE PD\u3001NFS \u7b49\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"parameters"}),"\uff1a\u5b9a\u7fa9\u8207\u5b58\u5132\u5f8c\u7aef\u76f8\u95dc\u7684\u914d\u7f6e\u7d30\u7bc0\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"reclaimPolicy"}),"\uff1a\u5b9a\u7fa9 PV \u88ab\u91cb\u653e\u5f8c\u7684\u8655\u7406\u7b56\u7565\uff08\u4f8b\u5982 ",(0,i.jsx)(e.code,{children:"Delete"})," \u6216 ",(0,i.jsx)(e.code,{children:"Retain"}),"\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"allowVolumeExpansion"}),"\uff1a\u5141\u8a31\u52d5\u614b\u64f4\u5c55\u5377\u7684\u5927\u5c0f\uff08\u9078\u64c7\u6027\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"volumeBindingMode"}),"\uff1a\u5b9a\u7fa9 PV \u7684\u7d81\u5b9a\u6a21\u5f0f\uff0c\u53ef\u8a2d\u70ba ",(0,i.jsx)(e.code,{children:"Immediate"}),"\uff08\u7acb\u5373\u7d81\u5b9a\uff09\u6216 ",(0,i.jsx)(e.code,{children:"WaitForFirstConsumer"}),"\uff08\u7b49\u5f85\u6d88\u8cbb\u8005\uff09\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u5e38\u898b\u7684-provisioner",children:"\u5e38\u898b\u7684 Provisioner"}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u898b\u7684 Storage Class provisioner\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"AWS"}),"\uff1a",(0,i.jsx)(e.code,{children:"kubernetes.io/aws-ebs"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Google Cloud"}),"\uff1a",(0,i.jsx)(e.code,{children:"kubernetes.io/gce-pd"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Azure"}),"\uff1a",(0,i.jsx)(e.code,{children:"kubernetes.io/azure-disk"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"NFS"}),"\uff1a",(0,i.jsx)(e.code,{children:"kubernetes.io/nfs"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Ceph"}),"\uff1a",(0,i.jsx)(e.code,{children:"ceph.com/rbd"})]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"reclaimpolicy-\u8a73\u7d30\u4ecb\u7d39",children:"reclaimPolicy \u8a73\u7d30\u4ecb\u7d39"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"reclaimPolicy"})," \u662f Kubernetes \u4e2d Persistent Volume (PV) \u7684\u4e00\u500b\u5c6c\u6027\uff0c\u5b9a\u7fa9\u4e86\u7576 PV \u8207 Persistent Volume Claim (PVC) \u89e3\u7d81\u5f8c\uff0c\u8a72 PV \u7684\u56de\u6536\u7b56\u7565\u3002\u56de\u6536\u7b56\u7565\u4e3b\u8981\u6709\u4ee5\u4e0b\u5169\u7a2e\u5e38\u898b\u985e\u578b\uff1a"]}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7b56\u7565\u985e\u578b"}),(0,i.jsx)(e.th,{children:"\u8aaa\u660e"}),(0,i.jsx)(e.th,{children:"\u9069\u7528\u5834\u666f"}),(0,i.jsx)(e.th,{children:"\u512a\u52e2"}),(0,i.jsx)(e.th,{children:"\u6ce8\u610f\u4e8b\u9805"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Retain"})}),(0,i.jsx)(e.td,{children:"\u4fdd\u7559 PV \u548c\u6578\u64da\uff0c\u7528\u6236\u9700\u624b\u52d5\u7ba1\u7406"}),(0,i.jsx)(e.td,{children:"\u6578\u64da\u9700\u4fdd\u7559\u6216\u91cd\u65b0\u4f7f\u7528\u7684\u5834\u666f"}),(0,i.jsx)(e.td,{children:"\u63d0\u4f9b\u66f4\u591a\u63a7\u5236\u6b0a"}),(0,i.jsx)(e.td,{children:"\u9700\u8981\u624b\u52d5\u8655\u7406 PV \u548c\u6578\u64da\u6e05\u7406"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"Delete"})}),(0,i.jsx)(e.td,{children:"\u81ea\u52d5\u522a\u9664 PV \u548c\u5e95\u5c64\u5b58\u5132"}),(0,i.jsx)(e.td,{children:"\u81e8\u6642\u5b58\u5132\u3001\u4e0d\u9700\u8981\u9577\u671f\u4fdd\u5b58\u7684\u5834\u666f"}),(0,i.jsx)(e.td,{children:"\u64cd\u4f5c\u7c21\u55ae\uff0c\u81ea\u52d5\u6e05\u7406"}),(0,i.jsx)(e.td,{children:"\u6578\u64da\u6703\u88ab\u6c38\u4e45\u522a\u9664"})]})]})]}),"\n",(0,i.jsx)(e.h4,{id:"1-retain",children:"1. Retain"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Retain"})," \u7b56\u7565\u8868\u793a\u7576 PVC \u91cb\u653e PV \u6642\uff0cPV \u4e0d\u6703\u81ea\u52d5\u522a\u9664\uff0c\u4e26\u4fdd\u7559\u5176\u539f\u59cb\u7684\u6578\u64da\uff0c\u9019\u4f7f\u5f97\u7528\u6236\u53ef\u4ee5\u624b\u52d5\u8655\u7406\u8a72\u5b58\u5132\u8cc7\u6e90\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u9ede"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6578\u64da\u4fdd\u7559"}),"\uff1aPV \u7684\u6578\u64da\u6703\u88ab\u4fdd\u7559\uff0c\u5373\u4f7f PVC \u88ab\u522a\u9664\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u624b\u52d5\u7ba1\u7406"}),"\uff1a\u7528\u6236\u9700\u8981\u624b\u52d5\u522a\u9664\u6216\u91cd\u65b0\u914d\u7f6e\u8a72 PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9069\u5408\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u654f\u611f\u6578\u64da\u7684\u4fdd\u5b58\uff0c\u4f8b\u5982\u9700\u8981\u5099\u4efd\u6216\u6062\u5fa9\u7684\u61c9\u7528\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u60f3\u8981\u91cd\u65b0\u4f7f\u7528 PV \u7684\u6578\u64da\uff0c\u4f46\u9700\u8981\u624b\u52d5\u9a57\u8b49\u548c\u914d\u7f6e\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6d41\u7a0b"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6236\u522a\u9664 PVC\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["PV \u72c0\u614b\u8b8a\u70ba ",(0,i.jsx)(e.code,{children:"Released"}),"\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"Kubernetes \u4e0d\u6703\u81ea\u52d5\u522a\u9664 PV \u6216\u5176\u6578\u64da\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u7ba1\u7406\u54e1\u53ef\u4ee5\u624b\u52d5\u522a\u9664 PV \u6216\u91cd\u8a2d\u5176\u72c0\u614b\uff0c\u4f7f\u5176\u80fd\u518d\u6b21\u7d81\u5b9a\u5230\u65b0\u7684 PVC\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f7f\u7528 Retain \u7b56\u7565\u7684 PV \u914d\u7f6e\u7bc4\u4f8b"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: retain-pv\nspec:\n  capacity:\n    storage: 5Gi\n  accessModes:\n    - ReadWriteOnce\n  // highlight-next-line\n  persistentVolumeReclaimPolicy: Retain\n  hostPath:\n    path: /data/retain-pv\n"})}),"\n",(0,i.jsx)(e.h4,{id:"2-delete",children:"2. Delete"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Delete"})," \u7b56\u7565\u8868\u793a\u7576 PVC \u88ab\u522a\u9664\u6642\uff0c\u8207\u5176\u7d81\u5b9a\u7684 PV \u53ca\u5176\u5e95\u5c64\u5b58\u5132\u8cc7\u6e90\uff08\u4f8b\u5982\u78c1\u789f\uff09\u6703\u81ea\u52d5\u88ab\u6e05\u9664\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u9ede"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81ea\u52d5\u6e05\u7406"}),"\uff1aPV \u548c\u5e95\u5c64\u5b58\u5132\u6703\u81ea\u52d5\u88ab Kubernetes \u522a\u9664\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7c21\u5316\u64cd\u4f5c"}),"\uff1a\u9069\u5408\u4e0d\u9700\u8981\u4fdd\u7559\u6578\u64da\u7684\u5834\u666f\uff0c\u907f\u514d\u624b\u52d5\u6e05\u7406\u5b58\u5132\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9069\u5408\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u958b\u767c\u6e2c\u8a66\u74b0\u5883\uff0c\u6578\u64da\u4e0d\u9700\u8981\u9577\u671f\u4fdd\u7559\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u81e8\u6642\u5b58\u5132\uff0c\u4f8b\u5982\u7de9\u5b58\u6578\u64da\u6216\u81e8\u6642\u6587\u4ef6\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6d41\u7a0b"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u7528\u6236\u522a\u9664 PVC\u3002"}),"\n",(0,i.jsx)(e.li,{children:"Kubernetes \u81ea\u52d5\u522a\u9664 PV \u548c\u5176\u5e95\u5c64\u5b58\u5132\uff08\u5982\u96f2\u7aef\u78c1\u789f\u3001NFS \u6587\u4ef6\u7b49\uff09\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u6574\u500b\u8cc7\u6e90\u88ab\u56de\u6536\uff0c\u7121\u9700\u984d\u5916\u64cd\u4f5c\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6ce8\u610f\u4e8b\u9805"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u5e95\u5c64\u5b58\u5132\u662f\u96f2\u670d\u52d9\uff08\u5982 AWS EBS \u6216 GCE PD\uff09\uff0c\u9019\u4e9b\u8cc7\u6e90\u6703\u96a8 PVC \u522a\u9664\u800c\u4e00\u8d77\u91cb\u653e\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u907f\u514d\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"Delete"})," \u7b56\u7565\u65bc\u9700\u8981\u9577\u671f\u4fdd\u7559\u6216\u654f\u611f\u6578\u64da\u7684\u5834\u666f\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f7f\u7528 Delete \u7b56\u7565\u7684 PV \u914d\u7f6e\u7bc4\u4f8b"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: delete-pv\nspec:\n  capacity:\n    storage: 5Gi\n  accessModes:\n    - ReadWriteOnce\n  // highlihgt-next-line\n  persistentVolumeReclaimPolicy: Delete\n  hostPath:\n    path: /data/delete-pv\n"})}),"\n",(0,i.jsx)(e.h3,{id:"storage-class-\u7684\u4f7f\u7528\u6d41\u7a0b",children:"Storage Class \u7684\u4f7f\u7528\u6d41\u7a0b"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5275\u5efa Storage Class"}),"\uff1a\u7ba1\u7406\u54e1\u5b9a\u7fa9\u4e0d\u540c\u7684 Storage Class \u4f86\u652f\u6301\u591a\u7a2e\u5b58\u5132\u9700\u6c42\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5275\u5efa PVC"}),"\uff1a\u7528\u6236\u5728 PVC \u4e2d\u6307\u5b9a\u6240\u9700\u7684 Storage Class \u540d\u7a31\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u52d5\u614b\u914d\u7f6e PV"}),"\uff1aKubernetes \u6839\u64da Storage Class \u7684\u914d\u7f6e\u81ea\u52d5\u5275\u5efa PV\uff0c\u4e26\u8207 PVC \u9032\u884c\u7d81\u5b9a\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4ec0\u9ebc\u662f-pvpersistent-volume",children:"\u4ec0\u9ebc\u662f PV\uff08Persistent Volume\uff09\uff1f"}),"\n",(0,i.jsx)(e.p,{children:"PV \u662f Kubernetes \u4e2d\u7684\u4e00\u7a2e\u8cc7\u6e90\uff0c\u8868\u793a\u96c6\u7fa4\u4e2d\u7684\u5b58\u5132\uff0c\u53ef\u4ee5\u7368\u7acb\u65bc Pod \u7684\u751f\u547d\u9031\u671f\u9032\u884c\u7ba1\u7406\u3002PV \u63d0\u4f9b\u4e86\u5b58\u5132\u7684\u62bd\u8c61\u5c64\uff0c\u5141\u8a31\u7528\u6236\u4ee5\u7d71\u4e00\u7684\u65b9\u5f0f\u8a2a\u554f\u5e95\u5c64\u5b58\u5132\u8cc7\u6e90\uff08\u5982 NFS\u3001iSCSI\u3001\u96f2\u5b58\u5132\u7b49\uff09\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"pv-\u7684\u7279\u6027",children:"PV \u7684\u7279\u6027"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7368\u7acb\u65bc Pod"}),"\uff1aPV \u662f\u96c6\u7fa4\u7bc4\u570d\u7684\u8cc7\u6e90\uff0c\u53ef\u4ee5\u88ab\u591a\u500b Pod \u4f7f\u7528\uff08\u8996\u5177\u9ad4\u914d\u7f6e\u800c\u5b9a\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u591a\u7a2e\u5b58\u5132\u5f8c\u7aef\u652f\u6301"}),"\uff1a\u652f\u6301\u5404\u7a2e\u5b58\u5132\u985e\u578b\uff08\u5982\u672c\u5730\u5b58\u5132\u3001\u5206\u4f48\u5f0f\u5b58\u5132\u548c\u96f2\u5b58\u5132\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5b58\u5132\u5927\u5c0f\u53ef\u5b9a\u7fa9"}),"\uff1a\u53ef\u6839\u64da\u9700\u6c42\u5b9a\u7fa9\u4e0d\u540c\u5927\u5c0f\u7684\u5b58\u5132\u7a7a\u9593\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pv-\u7684\u751f\u547d\u5468\u671f\u72c0\u614b",children:"PV \u7684\u751f\u547d\u5468\u671f\u72c0\u614b"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Available\uff08\u53ef\u7528\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PV \u5df2\u5275\u5efa\u4f46\u672a\u8207 PVC \u7d81\u5b9a\uff0c\u8655\u65bc\u7a7a\u9592\u72c0\u614b\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u53ef\u88ab PVC \u8acb\u6c42\u4e26\u7d81\u5b9a\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Bound\uff08\u5df2\u7d81\u5b9a\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PV \u5df2\u8207\u67d0\u500b PVC \u7d81\u5b9a\uff0c\u6b63\u5728\u88ab Pod \u4f7f\u7528\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u500b PV \u53ea\u80fd\u8207\u4e00\u500b PVC \u7d81\u5b9a\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Released\uff08\u5df2\u91cb\u653e\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PVC \u88ab\u522a\u9664\u5f8c\uff0cPV \u72c0\u614b\u8b8a\u70ba\u91cb\u653e\uff0c\u4f46\u6578\u64da\u4ecd\u4fdd\u7559\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u8996\u56de\u6536\u7b56\u7565\uff0cPV \u53ef\u91cd\u65b0\u4f7f\u7528\uff08",(0,i.jsx)(e.code,{children:"Retain"}),"\uff09\u6216\u522a\u9664\uff08",(0,i.jsx)(e.code,{children:"Delete"}),"\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Failed\uff08\u5931\u6557\uff09"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"PV \u56de\u6536\u6216\u522a\u9664\u904e\u7a0b\u5931\u6557\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u9700\u7ba1\u7406\u54e1\u6aa2\u67e5\u4e26\u4fee\u5fa9\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u72c0\u614b\u9077\u79fb",children:"\u72c0\u614b\u9077\u79fb"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Available \u2192 Bound"}),"\uff1a\u7576 PV \u88ab\u67d0\u500b PVC \u7d81\u5b9a\u5f8c\uff0c\u72c0\u614b\u5f9e Available \u8f49\u70ba Bound\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Bound \u2192 Released"}),"\uff1a\u7576 PVC \u88ab\u522a\u9664\u5f8c\uff0cPV \u72c0\u614b\u8f49\u70ba Released\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Released \u2192 Available"}),"\uff1a\u5982\u679c PV \u88ab\u56de\u6536\u4e26\u6e05\u7a7a\uff0c\u72c0\u614b\u53ef\u91cd\u7f6e\u70ba Available\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Released \u2192 Failed"}),"\uff1a\u5982\u679c PV \u7684\u56de\u6536\u7b56\u7565\u57f7\u884c\u5931\u6557\uff0c\u72c0\u614b\u8b8a\u70ba Failed\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4ec0\u9ebc\u662f-pvcpersistent-volume-claim",children:"\u4ec0\u9ebc\u662f PVC\uff08Persistent Volume Claim\uff09\uff1f"}),"\n",(0,i.jsx)(e.p,{children:"PVC \u662f\u7528\u6236\u5c0d\u5b58\u5132\u9700\u6c42\u7684\u8072\u660e\uff0c\u662f\u4e00\u7a2e\u5c0d PV \u7684\u8acb\u6c42\u3002\u7528\u6236\u4e0d\u9700\u8981\u95dc\u6ce8\u5e95\u5c64\u5b58\u5132\u7684\u5be6\u73fe\uff0c\u53ea\u9700\u901a\u904e PVC \u5b9a\u7fa9\u6240\u9700\u7684\u5b58\u5132\u5927\u5c0f\u8207\u8a2a\u554f\u6a21\u5f0f\u5373\u53ef\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u7684\u7279\u6027",children:"PVC \u7684\u7279\u6027"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7c21\u5316\u7528\u6236\u64cd\u4f5c"}),"\uff1a\u7528\u6236\u53ea\u9700\u5b9a\u7fa9\u9700\u6c42\uff0cKubernetes \u8ca0\u8cac\u5339\u914d\u5408\u9069\u7684 PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u52d5\u614b\u6216\u975c\u614b\u7d81\u5b9a"}),"\uff1a\u53ef\u4ee5\u8207\u4e8b\u5148\u5275\u5efa\u7684 PV \u7d81\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u6839\u64da PVC \u8acb\u6c42\u52d5\u614b\u5275\u5efa PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u591a\u7a2e\u8a2a\u554f\u6a21\u5f0f"}),"\uff1a\u652f\u6301\u55ae\u4e00 Pod \u8a2a\u554f\uff08ReadWriteOnce\uff09\u3001\u591a\u500b Pod \u540c\u6642\u8b80\u5beb\uff08ReadWriteMany\uff09\u3001\u53ea\u8b80\u8a2a\u554f\uff08ReadOnlyMany\uff09\u3001\u53ea\u5141\u8a31\u55ae\u500b Pod \u8b80\u5beb(ReadWriteOncePod)\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u8a2a\u554f\u6a21\u5f0f\u4ecb\u7d39",children:"PVC \u8a2a\u554f\u6a21\u5f0f\u4ecb\u7d39"}),"\n",(0,i.jsx)(e.p,{children:"PVC \u652f\u6301\u591a\u7a2e\u8a2a\u554f\u6a21\u5f0f\uff0c\u9019\u4e9b\u6a21\u5f0f\u5b9a\u7fa9\u4e86\u5b58\u5132\u8cc7\u6e90\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5373\u5982\u4f55\u5141\u8a31 Pod \u8a2a\u554f Persistent Volume (PV)\u3002\u4ee5\u4e0b\u662f\u6bcf\u7a2e\u8a2a\u554f\u6a21\u5f0f\u7684\u8a73\u7d30\u8aaa\u660e\uff1a"}),"\n",(0,i.jsx)(e.h4,{id:"1-readwriteonce-rwo",children:"1. ReadWriteOnce (RWO)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"ReadWriteOnce"})," \u5141\u8a31\u5b58\u5132\u5377\u5728\u55ae\u500b\u7bc0\u9ede\u4e0a\u4ee5\u8b80\u5beb\u6a21\u5f0f\u639b\u8f09\uff0c\u53ef\u88ab\u591a\u500b Pod \u540c\u6642\u4f7f\u7528\uff0c\u4f46\u50c5\u9650\u65bc\u540c\u4e00\u7bc0\u9ede\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u55ae\u7bc0\u9ede\u591a Pod"}),"\uff1a\u5728\u540c\u4e00\u7bc0\u9ede\u4e0a\uff0c\u8a72\u5b58\u5132\u5377\u53ef\u4ee5\u88ab\u591a\u500b Pod \u639b\u8f09\u4e26\u5171\u4eab\u8b80\u5beb\u6b0a\u9650\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8de8\u7bc0\u9ede\u9650\u5236"}),"\uff1a\u5b58\u5132\u5377\u7121\u6cd5\u540c\u6642\u639b\u8f09\u5230\u591a\u500b\u7bc0\u9ede\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u55ae\u7bc0\u9ede\u61c9\u7528\uff0c\u5982\u8cc7\u6599\u5eab\u6216\u9700\u8981\u9ad8\u6548\u5b58\u5132\u8a2a\u554f\u7684\u61c9\u7528\u7a0b\u5e8f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9650\u5236"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b58\u5132\u5377\u53ea\u80fd\u5728\u55ae\u500b\u7bc0\u9ede\u4e0a\u639b\u8f09\uff0c\u7121\u6cd5\u652f\u6301\u8de8\u7bc0\u9ede\u7684\u8b80\u5beb\u64cd\u4f5c\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5e95\u5c64\u5b58\u5132\u5f8c\u7aef\u5fc5\u9808\u652f\u6301 ",(0,i.jsx)(e.code,{children:"RWO"})," \u6a21\u5f0f\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"2-readwritemany-rwx",children:"2. ReadWriteMany (RWX)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"ReadWriteMany"})," \u5141\u8a31\u5b58\u5132\u5377\u88ab\u591a\u500b Pod \u540c\u6642\u639b\u8f09\uff0c\u4e26\u652f\u6301\u8de8\u591a\u500b\u7bc0\u9ede\u4ee5\u8b80\u5beb\u6a21\u5f0f\u8a2a\u554f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u591a\u7bc0\u9ede\u591a Pod \u5171\u4eab"}),"\uff1a\u5141\u8a31\u591a\u500b Pod \u540c\u6642\u8b80\u5beb\u5b58\u5132\u5377\uff0c\u7121\u8ad6 Pod \u4f4d\u65bc\u540c\u4e00\u7bc0\u9ede\u9084\u662f\u4e0d\u540c\u7bc0\u9ede\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u591a\u5be6\u4f8b\u61c9\u7528\u9700\u8981\u5171\u4eab\u6578\u64da\uff08\u4f8b\u5982\u57fa\u65bc NFS \u7684\u5b58\u5132\uff09\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5206\u5e03\u5f0f\u7cfb\u7d71\u3001\u5171\u4eab\u7de9\u5b58\u6216\u9700\u8981\u5171\u4eab\u5b58\u5132\u7684\u61c9\u7528\u7a0b\u5e8f\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9650\u5236"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5b58\u5132\u5f8c\u7aef\u9700\u8981\u652f\u6301\u5171\u4eab\u8a2a\u554f\uff08\u4f8b\u5982 NFS\u3001CephFS \u6216\u5176\u4ed6\u5206\u4f48\u5f0f\u6587\u4ef6\u7cfb\u7d71\uff09\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u540c\u6642\u8a2a\u554f\u7684 Pod \u6578\u91cf\u589e\u591a\u53ef\u80fd\u6703\u5f71\u97ff\u6027\u80fd\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"3-readonlymany-rox",children:"3. ReadOnlyMany (ROX)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"ReadOnlyMany"})," \u5141\u8a31\u5b58\u5132\u5377\u88ab\u591a\u500b Pod \u540c\u6642\u639b\u8f09\uff0c\u4e26\u4e14\u652f\u6301\u8de8\u591a\u500b\u7bc0\u9ede\u4ee5\u53ea\u8b80\u6a21\u5f0f\u8a2a\u554f\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u53ea\u8b80\u5171\u4eab"}),"\uff1a\u5141\u8a31\u591a\u500b Pod \u540c\u6642\u639b\u8f09\u5b58\u5132\u5377\uff0c\u4f46\u53ea\u80fd\u8b80\u53d6\u6578\u64da\uff0c\u7121\u6cd5\u9032\u884c\u4efb\u4f55\u4fee\u6539\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u8de8\u7bc0\u9ede\u652f\u6301"}),"\uff1aPod \u53ef\u4ee5\u5206\u4f48\u5728\u591a\u500b\u7bc0\u9ede\u4e0a\uff0c\u540c\u6642\u8a2a\u554f\u76f8\u540c\u7684\u5b58\u5132\u5377\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u975c\u614b\u8cc7\u6e90\u5171\u4eab\uff0c\u5982\u914d\u7f6e\u6587\u4ef6\u6216\u975c\u614b\u6578\u64da\uff08\u4f8b\u5982\u8a13\u7df4\u6578\u64da\u96c6\uff09\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5bb9\u5668\u9700\u8981\u8a2a\u554f\u76f8\u540c\u7684\u6578\u64da\u6e90\u4f46\u7121\u9700\u4fee\u6539\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9650\u5236"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4e0d\u652f\u6301\u5beb\u5165\u64cd\u4f5c\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5b58\u5132\u5f8c\u7aef\u9700\u652f\u6301\u591a\u7bc0\u9ede\u639b\u8f09\uff08\u4f8b\u5982 NFS \u6216\u5176\u4ed6\u5171\u4eab\u5b58\u5132\u7cfb\u7d71\uff09\u3002"}),"\n"]}),"\n",(0,i.jsxs)(e.h4,{id:"4-readwriteoncepod-rwop-kubernetes-v122-\u53ca\u4e4b\u5f8c\u7684\u7248\u672c",children:["4. ReadWriteOncePod (RWOP) ",(0,i.jsx)(e.em,{children:"(Kubernetes v1.22 \u53ca\u4e4b\u5f8c\u7684\u7248\u672c)"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"ReadWriteOncePod"})," \u662f\u4e00\u7a2e\u66f4\u56b4\u683c\u7684\u6a21\u5f0f\uff0c\u8868\u793a\u8a72\u5b58\u5132\u5377\u53ea\u80fd\u88ab\u4e00\u500b Pod \u639b\u8f09\uff0c\u4e14\u5177\u6709\u8b80\u5beb\u6b0a\u9650\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u55ae Pod \u9650\u5236"}),"\uff1a\u8207 RWO \u4e0d\u540c\uff0cRWOP \u4fdd\u8b49\u5b58\u5132\u5377\u50c5\u88ab\u55ae\u4e00 Pod \u639b\u8f09\uff0c\u5373\u4f7f\u8a72 Pod \u88ab\u8abf\u5ea6\u5230\u4e0d\u540c\u7684\u7bc0\u9ede\uff0c\u9019\u4e00\u9650\u5236\u4f9d\u7136\u6709\u6548\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"}),"\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9700\u8981\u5f37\u4e00\u81f4\u6027\u548c\u55ae\u4e00\u6d88\u8cbb\u8005\u7684\u5834\u666f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u5b58\u5132\u5377\u5728\u591a\u500b Pod \u4e4b\u9593\u610f\u5916\u88ab\u91cd\u8907\u4f7f\u7528\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9650\u5236"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u50c5\u9069\u7528\u65bc\u9700\u8981\u7d55\u5c0d\u4fdd\u8b49\u55ae Pod \u8a2a\u554f\u7684\u5834\u666f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u8207 RWO \u4e0d\u540c\uff0cRWOP \u6703\u5728\u8abf\u5ea6\u5c64\u9762\u9032\u884c\u5f37\u7d04\u675f\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u8a2a\u554f\u6a21\u5f0f\u6bd4\u8f03",children:"PVC \u8a2a\u554f\u6a21\u5f0f\u6bd4\u8f03"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u8a2a\u554f\u6a21\u5f0f"}),(0,i.jsx)(e.th,{children:"\u662f\u5426\u652f\u6301\u591a Pod \u639b\u8f09"}),(0,i.jsx)(e.th,{children:"\u662f\u5426\u652f\u6301\u8b80\u5beb"}),(0,i.jsx)(e.th,{children:"\u5e38\u898b\u5834\u666f"}),(0,i.jsx)(e.th,{children:"\u9650\u5236"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"ReadWriteOnce (RWO)"})}),(0,i.jsx)(e.td,{children:"\u55ae\u7bc0\u9ede\u591a Pod \u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u662f"}),(0,i.jsx)(e.td,{children:"\u55ae\u7bc0\u9ede\u61c9\u7528\u3001\u8cc7\u6599\u5eab"}),(0,i.jsx)(e.td,{children:"\u53ea\u80fd\u55ae\u7bc0\u9ede\u639b\u8f09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"ReadWriteMany (RWX)"})}),(0,i.jsx)(e.td,{children:"\u662f\uff08\u8de8\u7bc0\u9ede\u652f\u6301\uff09"}),(0,i.jsx)(e.td,{children:"\u662f"}),(0,i.jsx)(e.td,{children:"\u591a\u7bc0\u9ede\u5171\u4eab\u61c9\u7528\u3001\u5206\u5e03\u5f0f\u5b58\u5132"}),(0,i.jsx)(e.td,{children:"\u5b58\u5132\u5f8c\u7aef\u9700\u652f\u6301\u5171\u4eab\u8a2a\u554f"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"ReadOnlyMany (ROX)"})}),(0,i.jsx)(e.td,{children:"\u662f\uff08\u8de8\u7bc0\u9ede\u652f\u6301\uff09"}),(0,i.jsx)(e.td,{children:"\u5426"}),(0,i.jsx)(e.td,{children:"\u591a\u7bc0\u9ede\u8b80\u53d6\u975c\u614b\u6578\u64da"}),(0,i.jsx)(e.td,{children:"\u7121\u6cd5\u5beb\u5165"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"ReadWriteOncePod (RWOP)"})}),(0,i.jsx)(e.td,{children:"\u5426\uff08\u50c5\u55ae Pod\uff09"}),(0,i.jsx)(e.td,{children:"\u662f"}),(0,i.jsx)(e.td,{children:"\u55ae Pod \u5f37\u4e00\u81f4\u6027\u6578\u64da\u8a2a\u554f"}),(0,i.jsx)(e.td,{children:"\u50c5\u5141\u8a31\u4e00\u500b Pod \u639b\u8f09"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u5132\u5b58\u985e\u578b\u4ecb\u7d39",children:"PVC \u5132\u5b58\u985e\u578b\u4ecb\u7d39"}),"\n",(0,i.jsx)(e.p,{children:"Persistent Volume Claim (PVC) \u53ef\u4ee5\u901a\u904e\u4e0d\u540c\u7684\u5b58\u5132\u5f8c\u7aef\u63d0\u4f9b\u591a\u7a2e\u5132\u5b58\u985e\u578b\uff0c\u6eff\u8db3\u5404\u7a2e\u61c9\u7528\u5834\u666f\u9700\u6c42\u3002\u4ee5\u4e0b\u662f\u4e3b\u8981\u7684 PVC \u5132\u5b58\u985e\u578b\uff1a"}),"\n",(0,i.jsx)(e.h4,{id:"1-\u584a\u5b58\u5132-block-storage",children:"1. \u584a\u5b58\u5132 (Block Storage)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8aaa\u660e"})}),"\n",(0,i.jsx)(e.p,{children:"\u584a\u5b58\u5132\u662f\u4e00\u7a2e\u4f4e\u5c64\u6b21\u7684\u5b58\u5132\u985e\u578b\uff0c\u70ba\u61c9\u7528\u63d0\u4f9b\u88f8\u78c1\u789f\uff08Block Device\uff09\uff0c\u61c9\u7528\u53ef\u4ee5\u76f4\u63a5\u5c0d\u5176\u9032\u884c\u683c\u5f0f\u5316\u3001\u5206\u5340\u548c\u7ba1\u7406\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9ad8\u6027\u80fd"}),"\uff1a\u9069\u5408 I/O \u5bc6\u96c6\u578b\u61c9\u7528\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9748\u6d3b\u6027"}),"\uff1a\u61c9\u7528\u53ef\u81ea\u884c\u6c7a\u5b9a\u6587\u4ef6\u7cfb\u7d71\u7684\u683c\u5f0f\u5316\u548c\u639b\u8f09\u65b9\u5f0f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5f37\u4e00\u81f4\u6027"}),"\uff1a\u6bcf\u500b\u5b58\u5132\u584a\u7684\u64cd\u4f5c\u5747\u70ba\u7368\u7acb\u4e14\u539f\u5b50\u6027\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8cc7\u6599\u5eab\u61c9\u7528\uff08\u5982 MySQL\u3001PostgreSQL\uff09\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u65e5\u8a8c\u8a18\u9304\uff08\u5982 ElasticSearch\uff09\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u652f\u63f4\u7684\u5f8c\u7aef"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AWS EBS (Elastic Block Store)\u3002"}),"\n",(0,i.jsx)(e.li,{children:"GCE PD (Persistent Disk)\u3002"}),"\n",(0,i.jsx)(e.li,{children:"Azure Disk\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"2-\u6587\u4ef6\u5b58\u5132-file-storage",children:"2. \u6587\u4ef6\u5b58\u5132 (File Storage)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8aaa\u660e"})}),"\n",(0,i.jsx)(e.p,{children:"\u6587\u4ef6\u5b58\u5132\u70ba\u61c9\u7528\u63d0\u4f9b\u6587\u4ef6\u7cfb\u7d71\u63a5\u53e3\uff0c\u9069\u5408\u9700\u8981\u5171\u4eab\u5b58\u53d6\u7684\u61c9\u7528\u5834\u666f\u3002\u61c9\u7528\u7121\u9700\u8655\u7406\u5e95\u5c64\u5206\u5340\u6216\u683c\u5f0f\u5316\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5171\u4eab\u6027"}),"\uff1a\u591a\u500b Pod \u53ef\u540c\u6642\u639b\u8f09\u4e26\u8a2a\u554f\u6587\u4ef6\u7cfb\u7d71\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7c21\u5316\u7ba1\u7406"}),"\uff1a\u5b58\u5132\u5f8c\u7aef\u81ea\u52d5\u7ba1\u7406\u6587\u4ef6\u7cfb\u7d71\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9748\u6d3b\u5171\u4eab"}),"\uff1a\u652f\u6301\u591a Pod \u540c\u6642\u8b80\u53d6\u6216\u5beb\u5165\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5171\u4eab\u914d\u7f6e\u6587\u4ef6\u6216\u975c\u614b\u8cc7\u6e90\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u61c9\u7528\u7a0b\u5e8f\u4e2d\u9700\u8981\u591a\u5be6\u4f8b\u5171\u4eab\u6587\u4ef6\u7684\u5834\u666f\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u652f\u63f4\u7684\u5f8c\u7aef"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"NFS (Network File System)\u3002"}),"\n",(0,i.jsx)(e.li,{children:"Azure File\u3002"}),"\n",(0,i.jsx)(e.li,{children:"Google Filestore\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"3-\u7269\u4ef6\u5b58\u5132-object-storage",children:"3. \u7269\u4ef6\u5b58\u5132 (Object Storage)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8aaa\u660e"})}),"\n",(0,i.jsx)(e.p,{children:"\u7269\u4ef6\u5b58\u5132\u662f\u91dd\u5c0d\u975e\u7d50\u69cb\u5316\u6578\u64da\u7684\u5b58\u5132\u985e\u578b\uff0c\u901a\u5e38\u7528\u65bc\u5b58\u5132\u5927\u91cf\u6587\u4ef6\u6216\u4e8c\u9032\u5236\u6578\u64da\uff08\u5982\u5716\u7247\u3001\u5f71\u7247\u7b49\uff09\u3002Kubernetes \u901a\u904e CSI\uff08Container Storage Interface\uff09\u63d2\u4ef6\uff0c\u5c07\u7269\u4ef6\u5b58\u5132\u8207 PVC \u96c6\u6210\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u975e\u7d50\u69cb\u5316\u6578\u64da\u652f\u6301"}),"\uff1a\u9069\u5408\u5b58\u5132\u6587\u4ef6\u3001\u5099\u4efd\u6578\u64da\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9ad8\u5ea6\u53ef\u64f4\u5c55"}),"\uff1a\u652f\u6301\u6d77\u91cf\u6578\u64da\u5b58\u5132\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7db2\u8def\u5b58\u53d6"}),"\uff1a\u901a\u904e HTTP/S \u5354\u8b70\u8a2a\u554f\u6578\u64da\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5716\u7247\u6216\u8996\u983b\u5b58\u5132\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5099\u4efd\u548c\u6062\u5fa9\u6578\u64da\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u652f\u63f4\u7684\u5f8c\u7aef"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"AWS S3\u3002"}),"\n",(0,i.jsx)(e.li,{children:"Google Cloud Storage\u3002"}),"\n",(0,i.jsx)(e.li,{children:"MinIO\uff08\u958b\u6e90 S3 \u517c\u5bb9\u5b58\u5132\uff09\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"4-\u672c\u5730\u5b58\u5132-local-storage",children:"4. \u672c\u5730\u5b58\u5132 (Local Storage)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8aaa\u660e"})}),"\n",(0,i.jsx)(e.p,{children:"\u672c\u5730\u5b58\u5132\u4f7f\u7528 Kubernetes \u7bc0\u9ede\u7684\u672c\u5730\u78c1\u789f\u6216\u5b58\u5132\u8a2d\u5099\u4f5c\u70ba PV\uff0c\u901a\u5e38\u50c5\u9650\u65bc\u55ae\u7bc0\u9ede\u8a2a\u554f\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9ad8\u6027\u80fd"}),"\uff1a\u56e0\u70ba\u6578\u64da\u5b58\u5132\u65bc\u672c\u5730\u78c1\u789f\uff0c\u5ef6\u9072\u6975\u4f4e\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7bc0\u9ede\u9650\u5236"}),"\uff1aPVC \u50c5\u80fd\u8207\u5176\u6240\u5c6c\u7684\u7bc0\u9ede\u4e0a\u7684 PV \u7d81\u5b9a\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6613\u65bc\u90e8\u7f72"}),"\uff1a\u4e0d\u4f9d\u8cf4\u96f2\u7aef\u5b58\u5132\u670d\u52d9\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6e2c\u8a66\u74b0\u5883\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u4e0d\u9700\u8981\u5171\u4eab\u6578\u64da\u7684\u672c\u5730\u61c9\u7528\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u652f\u63f4\u7684\u5f8c\u7aef"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7bc0\u9ede\u672c\u5730\u78c1\u789f\u3002"}),"\n",(0,i.jsx)(e.li,{children:"NVMe \u6216 SSD \u672c\u5730\u5b58\u5132\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"5-\u52d5\u614b\u5b58\u5132-dynamic-provisioning",children:"5. \u52d5\u614b\u5b58\u5132 (Dynamic Provisioning)"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8aaa\u660e"})}),"\n",(0,i.jsx)(e.p,{children:"\u52d5\u614b\u5b58\u5132\u985e\u578b\u5141\u8a31 Kubernetes \u6839\u64da PVC \u81ea\u52d5\u5275\u5efa PV\uff0c\u800c\u4e0d\u9700\u8981\u7528\u6236\u9810\u5148\u5275\u5efa PV\u3002\u9700\u8981\u4f7f\u7528 StorageClass \u4f86\u5b9a\u7fa9\u5b58\u5132\u5f8c\u7aef\u914d\u7f6e\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u6027"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u81ea\u52d5\u5316"}),"\uff1aPV \u7684\u5275\u5efa\u548c\u7ba1\u7406\u5b8c\u5168\u7531 Kubernetes \u8655\u7406\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9748\u6d3b\u6027"}),"\uff1a\u652f\u6301\u591a\u7a2e\u5b58\u5132\u5f8c\u7aef\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7c21\u5316\u64cd\u4f5c"}),"\uff1a\u7528\u6236\u53ea\u9700\u5b9a\u7fa9 PVC\uff0c\u7121\u9700\u95dc\u6ce8 PV \u7684\u914d\u7f6e\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5e38\u898b\u5834\u666f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u591a\u79df\u6236\u74b0\u5883\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u9700\u8981\u5feb\u901f\u8abf\u6574\u5b58\u5132\u9700\u6c42\u7684\u61c9\u7528\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u652f\u63f4\u7684\u5f8c\u7aef"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u4efb\u4f55\u652f\u6301 StorageClass \u7684\u5b58\u5132\u63d2\u4ef6\uff08\u5982 CSI \u63d2\u4ef6\uff09\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u5132\u5b58\u985e\u578b\u6bd4\u8f03",children:"PVC \u5132\u5b58\u985e\u578b\u6bd4\u8f03"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u5132\u5b58\u985e\u578b"}),(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"\u5e38\u898b\u5834\u666f"}),(0,i.jsx)(e.th,{children:"\u652f\u63f4\u5f8c\u7aef"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u584a\u5b58\u5132"})}),(0,i.jsx)(e.td,{children:"\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u9072\u3001\u88f8\u78c1\u789f"}),(0,i.jsx)(e.td,{children:"\u8cc7\u6599\u5eab\u3001\u65e5\u8a8c\u8a18\u9304"}),(0,i.jsx)(e.td,{children:"AWS EBS\u3001GCE PD\u3001Azure Disk"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u6587\u4ef6\u5b58\u5132"})}),(0,i.jsx)(e.td,{children:"\u6587\u4ef6\u5171\u4eab\u3001\u591a Pod \u8a2a\u554f"}),(0,i.jsx)(e.td,{children:"\u5171\u4eab\u914d\u7f6e\u3001\u975c\u614b\u8cc7\u6e90\u5171\u4eab"}),(0,i.jsx)(e.td,{children:"NFS\u3001Azure File"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u7269\u4ef6\u5b58\u5132"})}),(0,i.jsx)(e.td,{children:"\u9ad8\u5ea6\u53ef\u64f4\u5c55\u3001HTTP/S \u8a2a\u554f"}),(0,i.jsx)(e.td,{children:"\u6587\u4ef6\u5b58\u5132\u3001\u5099\u4efd\u548c\u6062\u5fa9"}),(0,i.jsx)(e.td,{children:"AWS S3\u3001Google Cloud Storage"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u672c\u5730\u5b58\u5132"})}),(0,i.jsx)(e.td,{children:"\u9ad8\u6027\u80fd\u3001\u4f4e\u5ef6\u9072\u3001\u672c\u5730\u78c1\u789f"}),(0,i.jsx)(e.td,{children:"\u6e2c\u8a66\u74b0\u5883\u3001\u672c\u5730\u61c9\u7528"}),(0,i.jsx)(e.td,{children:"\u672c\u5730\u78c1\u789f\u3001NVMe"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\u52d5\u614b\u5b58\u5132"})}),(0,i.jsx)(e.td,{children:"\u81ea\u52d5\u5316\u5275\u5efa PV\uff0c\u652f\u6301\u591a\u7a2e\u5f8c\u7aef"}),(0,i.jsx)(e.td,{children:"\u591a\u79df\u6236\u74b0\u5883\u3001\u52d5\u614b\u8abf\u6574\u5b58\u5132\u9700\u6c42"}),(0,i.jsx)(e.td,{children:"\u4efb\u610f\u652f\u6301 StorageClass \u7684\u5f8c\u7aef"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"pvc-\u7684\u4f7f\u7528\u6d41\u7a0b",children:"PVC \u7684\u4f7f\u7528\u6d41\u7a0b"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6236\u8072\u660e"}),"\uff1a\u7528\u6236\u5b9a\u7fa9 PVC\uff0c\u63cf\u8ff0\u6240\u9700\u7684\u5b58\u5132\u5927\u5c0f\u548c\u8a2a\u554f\u6a21\u5f0f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7d81\u5b9a PV"}),"\uff1aKubernetes \u81ea\u52d5\u5c0b\u627e\u8207 PVC \u5339\u914d\u7684 PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Pod \u4f7f\u7528"}),"\uff1aPod \u901a\u904e\u639b\u8f09 PVC \u9593\u63a5\u8a2a\u554f PV \u63d0\u4f9b\u7684\u5b58\u5132\u8cc7\u6e90\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u4e09\u8005\u4e4b\u9593\u7684\u95dc\u4fc2",children:"\u4e09\u8005\u4e4b\u9593\u7684\u95dc\u4fc2"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"StorageClass"}),"\uff1a\u5b9a\u7fa9\u5b58\u5132\u7684\u985e\u578b\u548c\u914d\u7f6e\u7d30\u7bc0\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"PersistentVolume\uff08PV\uff09"}),"\uff1a\u63d0\u4f9b\u5be6\u969b\u7684\u5b58\u5132\u8cc7\u6e90\uff0c\u662f\u5b58\u5132\u7684\u5177\u9ad4\u5be6\u73fe\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"PersistentVolumeClaim\uff08PVC\uff09"}),"\uff1a\u7528\u6236\u7684\u5b58\u5132\u8acb\u6c42\uff0c\u901a\u904e PVC \u4f7f\u7528 PV\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u6d41\u7a0b\u9806\u5e8f",children:"\u6d41\u7a0b\u9806\u5e8f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"pv-relation",src:s(26301).A+"",width:"631",height:"491"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7ba1\u7406\u8005\u8a2d\u5b9a PV"}),"\uff1a\u7ba1\u7406\u8005\u9996\u5148\u6703\u8a2d\u5b9a PersistentVolume (PV)\uff0c\u4e26\u5b9a\u7fa9\u5b58\u5132\u5927\u5c0f\u3001\u5b58\u53d6\u6a21\u5f0f\uff08\u5982\u53ea\u8b80\u6216\u8b80\u5beb\uff09\u53ca\u5176\u4ed6\u5c6c\u6027\uff0c\u6216\u914d\u7f6e StorageClass \u4f86\u652f\u63f4\u52d5\u614b\u5275\u5efa PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6236\u63d0\u4ea4 PVC"}),"\uff1a\u7528\u6236\u901a\u904e PersistentVolumeClaim (PVC) \u63d0\u4ea4\u5b58\u5132\u8acb\u6c42\uff0c\u6307\u5b9a\u6240\u9700\u7684\u5b58\u5132\u5927\u5c0f\u3001\u5b58\u53d6\u6a21\u5f0f\u4ee5\u53ca\u6240\u9700\u7684 StorageClass\uff08\u5982\u679c\u9700\u8981\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"PVC \u8207 PV \u7d81\u5b9a"}),"\uff1aKubernetes \u6703\u5c0b\u627e\u4e00\u500b\u7b26\u5408\u689d\u4ef6\u7684 PV \u8207 PVC \u7d81\u5b9a\u3002\u5982\u679c\u6c92\u6709\u73fe\u6709\u7684 PV\uff0c\u4e14\u6307\u5b9a\u4e86 StorageClass\uff0cKubernetes \u6703\u4f7f\u7528\u8a72 StorageClass \u52d5\u614b\u5275\u5efa\u4e00\u500b\u65b0\u7684 PV\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"PVC \u639b\u8f09\u5230 Pod"}),"\uff1a\u7d81\u5b9a\u6210\u529f\u5f8c\uff0cPVC \u5c31\u53ef\u4ee5\u88ab Pod \u4f7f\u7528\uff0c\u4e26\u639b\u8f09\u5230 Pod \u4e0a\u7684\u6307\u5b9a\u8def\u5f91\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u5be6\u4f5c-pv--pvc",children:"\u5be6\u4f5c PV & PVC"}),"\n",(0,i.jsx)(e.h3,{id:"\u9810\u8a2d\u7684-storageclass",children:"\u9810\u8a2d\u7684 StorageClass"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u9996\u5148\u6211\u5011\u53ef\u4ee5\u67e5\u770b StorageClass\uff0c\u6211\u5011\u6703\u767c\u73fe kubernetes \u6709\u5e6b\u6211\u5011\u9810\u8a2d\u4e00\u500b StorageClass"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe get storageclasses.storage.k8s.io hostpath\n---\n\nNAME                 PROVISIONER          RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE\nhostpath (default)   docker.io/hostpath   Delete          Immediate           false                  99d\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u5efa\u7acb-pvc",children:"\u5efa\u7acb PVC"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u63a5\u8457\u6211\u5011\u53ef\u4ee5\u5efa\u7acb PVC \u7684\u8a2d\u5b9a\u6a94\uff0c\u56e0\u70ba\u6211\u5011\u5728\u55ae\u4e00\u7bc0\u9ede\uff0c\u4e26\u4e14\u5f8c\u7e8c\u6709\u591a\u500b Pod \u9700\u8981\u5beb\u5165\u548c\u8b80\u53d6\uff0c\u56e0\u6b64 accessModes \u6211\u5011\u4f7f\u7528",(0,i.jsx)(e.code,{children:"ReadWriteOnce"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u5728 storageClassName \u6211\u5011\u6307\u5b9a\u4e0a\u9762\u7684\u9810\u8a2d",(0,i.jsx)(e.code,{children:"hostpath"}),'\uff0c\u5982\u679c\u4e0d\u60f3\u4f7f\u7528\u9810\u8a2d\u8981\u5728 storageClassName \u7559\u4e0a""\u3002']}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u53e6\u5916\u589e\u52a0\u8cc7\u6e90\u9650\u5236\uff0c\u6700\u5927\u5132\u5b58\u7a7a\u9593\u662f 1 GibiByte\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",metastring:'title="pvc-demo.yaml"',children:"apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: pvc-demo\nspec:\n  accessModes:\n    - ReadWriteOnce\n  storageClassName: hostpath\n  resources:\n    requests:\n      storage: 1Gi\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528\u6307\u4ee4\u57f7\u884c\u4ed6\uff0c\u4e26\u4e14\u6211\u5011\u53ef\u4ee5\u67e5\u770b PV \u662f\u5426\u81ea\u52d5\u5efa\u7acb\uff0c\u4e26\u4e14\u53ef\u4ee5\u770b\u5230\u72c0\u614b\u662f\u5426\u662f Bound\uff0c\u53e6\u5916 PVC \u4e5f\u6703\u5efa\u7acb\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe apply -f pvc-demo.yaml\n---\n\npersistentvolumeclaim/pvc-demo created\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe get pv\n---\n\nNAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM              STORAGECLASS   REASON   AGE\npvc-9bb1ea11-b8ff-4b4d-b217-5fe68d31b1a0   1Gi        RWO            Delete           Bound    default/pvc-demo   hostpath                21s\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe get pvc\n---\n\nNAME       STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\npvc-demo   Bound    pvc-9bb1ea11-b8ff-4b4d-b217-5fe68d31b1a0   1Gi        RWO            hostpath       50s\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u5efa\u7acb\u5169\u500b\u670d\u52d9\u4f7f\u7528\u76f8\u540c-pvc",children:"\u5efa\u7acb\u5169\u500b\u670d\u52d9\u4f7f\u7528\u76f8\u540c PVC"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\u9996\u5148\u6211\u5011\u50cf\u4e4b\u524d ",(0,i.jsx)(e.a,{href:"/docs/notes/kubernetes-basics/volume-emptydir#%E5%AF%A6%E4%BD%9C%E4%B8%80%E5%80%8B-emptydir",children:"\u5be6\u4f5c EmptyDir"})," \u4e00\u6a23\uff0c\u9700\u8981\u5efa\u7acb alpine \u548c nginx\uff0c\nalpine \u8ca0\u8cac\u6bcf 10 \u79d2\u5beb\u5165\u4e00\u7b46\u8cc7\u6599\u5230 index.html\uff0cnginx \u5247\u5c07 index.html \u56de\u61c9\u7d66\u8acb\u6c42\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"\u5728\u5169\u500b\u8a2d\u5b9a\u6a94\u4e2d\u7684 volume\uff0c\u6211\u5011\u4f7f\u7528 persistentVolumeClaim \u4f86\u6307\u5b9a\u525b\u525b\u7684 PVC \u540d\u7a31\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",metastring:'title="alpine-pod.yaml"',children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: alpine-pod\nspec:\n  containers:\n  - name: alpine\n    image: alpine:latest\n    command: ["sh", "-c"]\n    args: # \u6bcf 10 \u79d2\u5411 index.html \u5beb\u5165\u8cc7\u6599\n      - while true; do\n        echo $(hostname) $(date) >> /html/index.html;\n        sleep 10;\n        done\n    volumeMounts:\n    - name: html\n      mountPath: /html\n  volumes:\n  - name: html\n    // highlight-start\n    persistentVolumeClaim:\n      claimName: pvc-demo\n      readOnly: false\n    // highlight-end\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",metastring:'title="nginx-pod.yaml"',children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx-pod\nspec:\n  containers:\n    - name: nginx\n      image: nginx:latest\n      volumeMounts:\n        - name: html\n          mountPath: /usr/share/nginx/html\n  volumes:\n    - name: html\n      // highlight-start\n      persistentVolumeClaim:\n        claimName: pvc-demo\n        readOnly: false\n      // highlight-end\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsx)(e.li,{children:"\u63a5\u8457\u900f\u904e\u6307\u4ee4\u5c07\u5169\u500b Pod \u904b\u884c\u8d77\u4f86\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe apply -f alpine-pod.yaml,nginx-pod.yaml\n---\n\npod/alpine-pod created\npod/nginx-pod created\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"4",children:["\n",(0,i.jsx)(e.li,{children:"\u63a5\u8457\u6211\u5011\u4f7f\u7528 port-forward \u5c07 nginx \u5c0e\u5411\u672c\u6a5f\uff0c\u6211\u5011\u624d\u80fd\u547c\u53eb\u5230\u4ed6\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe port-forward pod/nginx-pod 8080:80\n---\n\nForwarding from 127.0.0.1:8080 -> 80\nForwarding from [::1]:8080 -> 80\n"})}),"\n",(0,i.jsxs)(e.ol,{start:"5",children:["\n",(0,i.jsx)(e.li,{children:"\u900f\u904e\u6307\u4ee4\u547c\u53eb nignx\uff0c\u4e26\u4e14\u67e5\u770b\u56de\u61c9\uff0c\u5c31\u6703\u767c\u73fe\u4e0d\u540c\u7684 Pod \u537b\u80fd\u5171\u7528\u540c\u4e00\u500b volume\uff0c\u4e0d\u9700\u8981\u624b\u52d5\u5148\u5275\u7acb PV\uff0c\u76f4\u63a5\u6307\u5b9a PVC \u5c31\u5b8c\u6210\u4e86\uff0c\u8d85\u7d1a\u65b9\u4fbf\u7684\uff01"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"(Invoke-WebRequest -Uri http://localhost:8080 -UseBasicParsing).Content\n---\n\nalpine-pod Thu Jan 23 18:13:45 UTC 2025\nalpine-pod Thu Jan 23 18:13:55 UTC 2025\nalpine-pod Thu Jan 23 18:14:05 UTC 2025\nalpine-pod Thu Jan 23 18:14:15 UTC 2025\nalpine-pod Thu Jan 23 18:14:25 UTC 2025\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u522a\u9664-pvc-\u5f8c-pv-\u81ea\u52d5\u522a\u9664",children:"\u522a\u9664 PVC \u5f8c PV \u81ea\u52d5\u522a\u9664"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u9996\u5148\u6211\u5011\u5148\u522a\u9664\u5169\u500b Pod\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'kubectl.exe delete -f alpine-pod.yaml,nginx-pod.yaml\n---\n\npod "alpine-pod" deleted\npod "nginx-pod" deleted\n'})}),"\n",(0,i.jsxs)(e.ol,{start:"2",children:["\n",(0,i.jsxs)(e.li,{children:["\u63a5\u8457\u6211\u5011\u522a\u9664\u5b9a\u7fa9\u7684 PVC\uff0c\u6211\u5011\u6703\u767c\u73fe\u539f\u672c\u7684 PV \u4e5f\u88ab\u522a\u9664\uff0c\u56e0\u70ba\u9810\u8a2d hostpath PVC \u7684 reclaimPolicy \u662f ",(0,i.jsx)(e.code,{children:"DELETE"}),"\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'kubectl.exe delete -f pvc-demo.yaml\n---\n\npersistentvolumeclaim "pvc-demo" deleted\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"kubectl.exe get pv\n---\n\nNo resources found\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"\u7d50\u8ad6",children:"\u7d50\u8ad6"}),"\n",(0,i.jsx)(e.p,{children:"PV \u548c PVC \u662f Kubernetes \u4e2d\u8655\u7406\u6301\u4e45\u5316\u5b58\u5132\u7684\u91cd\u8981\u6a5f\u5236\u3002\u900f\u904e PV \u548c PVC\uff0c\u7528\u6236\u53ef\u4ee5\u65b9\u4fbf\u5730\u7ba1\u7406\u548c\u4f7f\u7528\u5b58\u5132\u8cc7\u6e90\uff0c\u5f9e\u800c\u63d0\u5347\u61c9\u7528\u7684\u9748\u6d3b\u6027\u8207\u53ef\u64f4\u5c55\u6027\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{})})]})}function o(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(x,{...n})}):x(n)}}}]);