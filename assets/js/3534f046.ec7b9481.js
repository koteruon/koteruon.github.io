"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2630],{4069:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"notes/kubernetes-basics/security-user-management-with-kubernetes-context","title":"Security - User Management with Kubernetes Context","description":"Kubernetes Context \u662f\u4ec0\u9ebc\uff1f","source":"@site/docs/notes/kubernetes-basics/29-security-user-management-with-kubernetes-context.mdx","sourceDirName":"notes/kubernetes-basics","slug":"/notes/kubernetes-basics/security-user-management-with-kubernetes-context","permalink":"/docs/notes/kubernetes-basics/security-user-management-with-kubernetes-context","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":29,"frontMatter":{},"sidebar":"notesSidebar","previous":{"title":"AutoScaling - Custom Pod AutoScaler","permalink":"/docs/notes/kubernetes-basics/autoscaling-custom-pod-autoscaler"},"next":{"title":"Security - RBAC Authorization","permalink":"/docs/notes/kubernetes-basics/security-rbac-authorization"}}');var t=s(74848),r=s(28453);const l={},i="Security - User Management with Kubernetes Context",d={},o=[{value:"Kubernetes Context \u662f\u4ec0\u9ebc\uff1f",id:"kubernetes-context-\u662f\u4ec0\u9ebc",level:2},{value:"Context \u7684\u7d44\u6210",id:"context-\u7684\u7d44\u6210",level:3},{value:"Context \u7684\u7bc4\u4f8b",id:"context-\u7684\u7bc4\u4f8b",level:3},{value:"Context \u91cd\u9ede\u6574\u7406",id:"context-\u91cd\u9ede\u6574\u7406",level:3},{value:"1. Clusters",id:"1-clusters",level:4},{value:"2. Contexts",id:"2-contexts",level:4},{value:"3. Users",id:"3-users",level:4},{value:"\u5efa\u7acb\u8207\u7ba1\u7406 Context",id:"\u5efa\u7acb\u8207\u7ba1\u7406-context",level:3},{value:"\u65b0\u589e Context",id:"\u65b0\u589e-context",level:4},{value:"\u67e5\u770b\u53ef\u7528 Context",id:"\u67e5\u770b\u53ef\u7528-context",level:4},{value:"\u5207\u63db Context",id:"\u5207\u63db-context",level:4},{value:"\u522a\u9664 Context",id:"\u522a\u9664-context",level:4},{value:"\u4f7f\u7528 Context \u4f86\u7ba1\u7406\u4e0d\u540c\u74b0\u5883",id:"\u4f7f\u7528-context-\u4f86\u7ba1\u7406\u4e0d\u540c\u74b0\u5883",level:2},{value:"\u591a\u500b\u958b\u767c\u74b0\u5883",id:"\u591a\u500b\u958b\u767c\u74b0\u5883",level:3},{value:"\u7c97\u7565\u7684 kubeconfig",id:"\u7c97\u7565\u7684-kubeconfig",level:3},{value:"GKE \u7684 Cluster \u548c User",id:"gke-\u7684-cluster-\u548c-user",level:2},{value:"\u7bc4\u4f8b GKE kubeconfig \u6a94\u6848",id:"\u7bc4\u4f8b-gke-kubeconfig-\u6a94\u6848",level:3},{value:"\u89e3\u6790\u5404\u500b\u90e8\u5206",id:"\u89e3\u6790\u5404\u500b\u90e8\u5206",level:3},{value:"<code>gcloud container clusters get-credentials</code>",id:"gcloud-container-clusters-get-credentials",level:3},{value:"<code>gcloud container clusters set-cluster</code>",id:"gcloud-container-clusters-set-cluster",level:3},{value:"\u8a9e\u6cd5\uff1a",id:"\u8a9e\u6cd5",level:4},{value:"\u53c3\u6578\uff1a",id:"\u53c3\u6578",level:4},{value:"\u7bc4\u4f8b\uff1a",id:"\u7bc4\u4f8b",level:4},{value:"<code>gcloud container clusters set-credentials</code>",id:"gcloud-container-clusters-set-credentials",level:3},{value:"\u8a9e\u6cd5\uff1a",id:"\u8a9e\u6cd5-1",level:4},{value:"\u53c3\u6578\uff1a",id:"\u53c3\u6578-1",level:4},{value:"\u7bc4\u4f8b\uff1a",id:"\u7bc4\u4f8b-1",level:4},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"security---user-management-with-kubernetes-context",children:"Security - User Management with Kubernetes Context"})}),"\n",(0,t.jsx)(n.h2,{id:"kubernetes-context-\u662f\u4ec0\u9ebc",children:"Kubernetes Context \u662f\u4ec0\u9ebc\uff1f"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Context",src:s(77342).A+"",width:"611",height:"301"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Kubernetes Context"})," \u662f ",(0,t.jsx)(n.code,{children:"kubectl"})," \u7528\u4f86\u7ba1\u7406\u591a\u500b Kubernetes \u53e2\u96c6\u8207\u4f7f\u7528\u8005\u8eab\u4efd\u7684\u6a5f\u5236\uff0c",(0,t.jsx)(n.strong,{children:"\u4f7f\u958b\u767c\u8005\u80fd\u5920\u5feb\u901f\u5207\u63db\u4e0d\u540c\u7684\u74b0\u5883"}),"\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"context-\u7684\u7d44\u6210",children:"Context \u7684\u7d44\u6210"}),"\n",(0,t.jsx)(n.p,{children:"\u4e00\u500b Kubernetes Context \u7531\u4ee5\u4e0b\u5e7e\u500b\u90e8\u5206\u7d44\u6210\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cluster"}),"\uff1a\u6307\u5411 Kubernetes \u53e2\u96c6\u7684 API \u4f3a\u670d\u5668\u5730\u5740\uff08",(0,t.jsx)(n.code,{children:"server"})," \u53c3\u6578\uff09\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"User"}),"\uff1a\u8207\u8a72 Context \u76f8\u95dc\u806f\u7684\u7528\u6236\u6191\u8b49\uff0c\u6c7a\u5b9a\u4f7f\u7528\u8005\u8eab\u4efd\u8207\u6b0a\u9650\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Namespace"}),"\uff1a\u8a2d\u5b9a\u9810\u8a2d\u7684\u547d\u540d\u7a7a\u9593\uff0c\u907f\u514d\u5728 ",(0,t.jsx)(n.code,{children:"kubectl"})," \u547d\u4ee4\u4e2d\u624b\u52d5\u6307\u5b9a\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u53ef\u4ee5\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"kubectl config get-contexts"})," \u4f86\u67e5\u770b\u6240\u6709\u53ef\u7528\u7684 Context\uff0c\u4e26\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"kubectl config use-context <context-name>"})," \u5207\u63db\u81f3\u6307\u5b9a\u7684 Context\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"context-\u7684\u7bc4\u4f8b",children:"Context \u7684\u7bc4\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl.exe config view\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nclusters:\n  - cluster:\n      certificate-authority-data: DATA+OMITTED\n      server: https://kubernetes.docker.internal:6443\n    name: docker-desktop\ncontexts:\n  - context:\n      cluster: docker-desktop\n      user: docker-desktop\n    name: docker-desktop\ncurrent-context: docker-desktop\nkind: Config\npreferences: {}\nusers:\n  - name: docker-desktop\n    user:\n      client-certificate-data: DATA+OMITTED\n      client-key-data: DATA+OMITTED\n"})}),"\n",(0,t.jsx)(n.h3,{id:"context-\u91cd\u9ede\u6574\u7406",children:"Context \u91cd\u9ede\u6574\u7406"}),"\n",(0,t.jsx)(n.h4,{id:"1-clusters",children:"1. Clusters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5b9a\u7fa9 Kubernetes \u53e2\u96c6\u7684\u9023\u7dda\u8cc7\u8a0a\u3002"}),"\n",(0,t.jsxs)(n.li,{children:["\u5305\u542b ",(0,t.jsx)(n.strong,{children:"certificate-authority-data"})," (\u6191\u8b49) \u53ca ",(0,t.jsx)(n.strong,{children:"server"})," (API \u4f3a\u670d\u5668\u4f4d\u5740)\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u6b64\u8655\u8a2d\u5b9a\u7684\u53e2\u96c6\u540d\u7a31\u70ba ",(0,t.jsx)(n.strong,{children:"docker-desktop"}),"\uff0c\u4f4d\u65bc ",(0,t.jsx)(n.code,{children:"https://kubernetes.docker.internal:6443"}),"\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"2-contexts",children:"2. Contexts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6307\u5b9a Kubernetes \u64cd\u4f5c\u7684\u9810\u8a2d\u74b0\u5883\u3002"}),"\n",(0,t.jsxs)(n.li,{children:["\u7531 ",(0,t.jsx)(n.strong,{children:"cluster (\u53e2\u96c6)"})," \u548c ",(0,t.jsx)(n.strong,{children:"user (\u4f7f\u7528\u8005\u6191\u8b49)"})," \u7d44\u6210\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u7576\u524d context \u70ba ",(0,t.jsx)(n.strong,{children:"docker-desktop"}),"\uff0c\u4f7f\u7528 ",(0,t.jsx)(n.strong,{children:"docker-desktop"})," \u53e2\u96c6\u8207\u5c0d\u61c9\u7684\u4f7f\u7528\u8005\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3-users",children:"3. Users"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5b9a\u7fa9\u8207 Kubernetes \u4e92\u52d5\u7684\u6191\u8b49\u8cc7\u8a0a\u3002"}),"\n",(0,t.jsxs)(n.li,{children:["\u9019\u88e1\u7684\u4f7f\u7528\u8005 ",(0,t.jsx)(n.strong,{children:"docker-desktop"})," \u900f\u904e ",(0,t.jsx)(n.strong,{children:"client-certificate-data"})," \u53ca ",(0,t.jsx)(n.strong,{children:"client-key-data"})," \u9032\u884c\u9a57\u8b49\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5efa\u7acb\u8207\u7ba1\u7406-context",children:"\u5efa\u7acb\u8207\u7ba1\u7406 Context"}),"\n",(0,t.jsx)(n.h4,{id:"\u65b0\u589e-context",children:"\u65b0\u589e Context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'kubectl.exe config set-context my-context --cluster=my-cluster --user=my-user --namespace=default\n---\n\nContext "my-context" created.\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u67e5\u770b\u53ef\u7528-context",children:"\u67e5\u770b\u53ef\u7528 Context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl.exe config get-contexts\n---\n\nCURRENT   NAME             CLUSTER          AUTHINFO         NAMESPACE\n*         docker-desktop   docker-desktop   docker-desktop\n          my-context       my-cluster       my-user          default\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u5207\u63db-context",children:"\u5207\u63db Context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'kubectl.exe config use-context my-context\n---\n\nSwitched to context "my-context".\n'})}),"\n",(0,t.jsx)(n.h4,{id:"\u522a\u9664-context",children:"\u522a\u9664 Context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl.exe config delete-context my-context\n---\n\ndeleted context my-context from C:\\Users\\calvin\\.kube\\config\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u4f7f\u7528-context-\u4f86\u7ba1\u7406\u4e0d\u540c\u74b0\u5883",children:"\u4f7f\u7528 Context \u4f86\u7ba1\u7406\u4e0d\u540c\u74b0\u5883"}),"\n",(0,t.jsx)(n.h3,{id:"\u591a\u500b\u958b\u767c\u74b0\u5883",children:"\u591a\u500b\u958b\u767c\u74b0\u5883"}),"\n",(0,t.jsx)(n.p,{children:"Context \u7279\u5225\u9069\u7528\u65bc\u7ba1\u7406\u591a\u500b Kubernetes \u53e2\u96c6\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u958b\u767c\u74b0\u5883"}),"\uff08development\uff09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u751f\u7522\u74b0\u5883"}),"\uff08production\uff09"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u5047\u8a2d\u4f60\u9700\u8981\u5728\u958b\u767c\u74b0\u5883\u8207\u751f\u7522\u74b0\u5883\u4e4b\u9593\u5207\u63db\uff0c\u53ef\u4ee5\u8a2d\u5b9a\u591a\u500b Context\uff0c\u5982\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"kubectl config set-context development --cluster=dev-cluster --user=developer --namespace=dev\nkubectl config set-context production --cluster=prod-cluster --user=admin --namespace=prod\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u7c97\u7565\u7684-kubeconfig",children:"\u7c97\u7565\u7684 kubeconfig"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nclusters:\n  - cluster:\n    name: dev-cluster\n  - cluster:\n    name: prod-cluster\ncontexts:\n  - context:\n      cluster: dev-cluster\n      namespace: dev\n      user: developer\n    name: development\n  - context:\n      cluster: prod-cluster\n      namespace: prod\n      user: admin\n    name: production\ncurrent-context: development\nkind: Config\npreferences: {}\nusers:\n  - name: developer\n  - name: admin\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u7576\u4f60\u5c07 ",(0,t.jsx)(n.code,{children:"kubectl"})," \u7684 context \u5f9e ",(0,t.jsx)(n.code,{children:"development"})," \u5207\u63db\u5230 ",(0,t.jsx)(n.code,{children:"production"})," \u6642\uff0c\n\u6703\u5c07\u76ee\u6a19\u53e2\u96c6\u5207\u63db\u70ba ",(0,t.jsx)(n.code,{children:"prod-cluster"}),"\uff0c\u547d\u540d\u7a7a\u9593\u8b8a\u66f4\u70ba ",(0,t.jsx)(n.code,{children:"prod"}),"\uff0c\u4e26\u4e14\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"admin"})," \u4f7f\u7528\u8005\u7684\u6191\u8b49\u4f86\u57f7\u884c\u64cd\u4f5c\u3002\n\u9019\u6a23\u4e00\u4f86\uff0c\u6240\u6709\u5f8c\u7e8c\u7684 ",(0,t.jsx)(n.code,{children:"kubectl"})," \u6307\u4ee4\u5c07\u91dd\u5c0d\u751f\u7522\u74b0\u5883\u9032\u884c\uff0c\u78ba\u4fdd\u5728\u6b63\u78ba\u7684\u74b0\u5883\u4e2d\u57f7\u884c\u90e8\u7f72\u6216\u7ba1\u7406\u5de5\u4f5c\uff0c\u907f\u514d\u8aa4\u64cd\u4f5c\u5f71\u97ff\u958b\u767c\u74b0\u5883\u3002"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"gke-\u7684-cluster-\u548c-user",children:"GKE \u7684 Cluster \u548c User"}),"\n",(0,t.jsx)(n.p,{children:"\u7531\u65bc\u6211\u5011\u5728\u672c\u5730\u4f7f\u7528 docker-desktop\uff0c\u4ed6\u53ea\u6709\u63d0\u4f9b\u6211\u5011\u4e00\u500b cluster\uff0c\u4f46\u5be6\u52d9\u4e0a\u6211\u5011\u5927\u591a\u7528\u96f2\u7aef\u5e73\u53f0\u6574\u7406\u597d\u7684 kubernetes \u670d\u52d9\uff0c\u56e0\u6b64\u6211\u5011\u4ecb\u7d39 GKE \u4e0a\u7684 Context \u7ba1\u7406\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u7bc4\u4f8b-gke-kubeconfig-\u6a94\u6848",children:"\u7bc4\u4f8b GKE kubeconfig \u6a94\u6848"}),"\n",(0,t.jsxs)(n.p,{children:["\u7576\u4f60\u6210\u529f\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"gcloud container clusters get-credentials"})," \u6307\u4ee4\u5f9e Google Kubernetes Engine (GKE) \u53e2\u96c6\u53d6\u5f97\u8a8d\u8b49\u4e26\u66f4\u65b0\u4f60\u7684 ",(0,t.jsx)(n.code,{children:"kubeconfig"})," \u6a94\u6848\u5f8c\uff0c",(0,t.jsx)(n.code,{children:"kubeconfig"})," \u6703\u5305\u542b\u4ee5\u4e0b\u8cc7\u8a0a\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nclusters:\n  - cluster:\n      certificate-authority-data: DATA+OMITTED\n      server: https://35.231.123.456\n    name: gke_my-project_us-central1-a_my-cluster\ncontexts:\n  - context:\n      cluster: gke_my-project_us-central1-a_my-cluster\n      user: gke_my-project_us-central1-a_my-cluster\n    name: gke_my-project_us-central1-a_my-cluster\ncurrent-context: gke_my-project_us-central1-a_my-cluster\nkind: Config\npreferences: {}\nusers:\n  - name: gke_my-project_us-central1-a_my-cluster\n    user:\n      auth-provider:\n        config:\n          access-token: <ACCESS_TOKEN>\n          cmd-args: config config-helper --format=json\n          cmd-path: gcloud\n          expiry: '2025-02-06T00:00:00Z'\n          expiration-time: '2025-02-06T00:00:00Z'\n          token-type: Bearer\n        name: gcp\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u89e3\u6790\u5404\u500b\u90e8\u5206",children:"\u89e3\u6790\u5404\u500b\u90e8\u5206"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"clusters"}),"\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5305\u542b\u53e2\u96c6\u7684\u9023\u7dda\u8cc7\u8a0a\uff0c\u5982 API \u4f3a\u670d\u5668\u4f4d\u5740 (",(0,t.jsx)(n.code,{children:"server"}),") \u548c\u6191\u8b49\u8cc7\u6599 (",(0,t.jsx)(n.code,{children:"certificate-authority-data"}),")\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u9019\u88e1\u7684\u53e2\u96c6\u540d\u7a31\u662f ",(0,t.jsx)(n.code,{children:"gke_my-project_us-central1-a_my-cluster"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"contexts"}),"\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5b9a\u7fa9\u4e86\u4e0a\u4e0b\u6587\uff08context\uff09\uff0c\u5c07 ",(0,t.jsx)(n.code,{children:"cluster"})," \u8207 ",(0,t.jsx)(n.code,{children:"user"})," \u9032\u884c\u914d\u5c0d\u3002\u9019\u88e1\u7684 ",(0,t.jsx)(n.code,{children:"context"})," \u6703\u8207 ",(0,t.jsx)(n.code,{children:"gke_my-project_us-central1-a_my-cluster"})," \u76f8\u95dc\u806f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"current-context"}),"\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9019\u544a\u8a34 ",(0,t.jsx)(n.code,{children:"kubectl"})," \u76ee\u524d\u4f7f\u7528\u7684 context\uff0c\u78ba\u4fdd ",(0,t.jsx)(n.code,{children:"kubectl"})," \u6307\u4ee4\u6703\u91dd\u5c0d\u8a72\u53e2\u96c6\u57f7\u884c\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"users"}),"\uff1a","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5305\u542b ",(0,t.jsx)(n.code,{children:"gcp"})," \u9a57\u8b49\u63d0\u4f9b\u8005\u8a2d\u5b9a\uff0c\u9019\u4e9b\u8cc7\u8a0a\u4f86\u81ea ",(0,t.jsx)(n.code,{children:"gcloud"}),"\uff0c\u4e26\u5305\u62ec\u5b58\u53d6\u4ee4\u724c (",(0,t.jsx)(n.code,{children:"access-token"}),") \u548c\u4ee4\u724c\u7684\u6709\u6548\u671f\u9650\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"gcloud-container-clusters-get-credentials",children:(0,t.jsx)(n.code,{children:"gcloud container clusters get-credentials"})}),"\n",(0,t.jsxs)(n.p,{children:["\u9996\u5148\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c",(0,t.jsx)(n.code,{children:"gcloud container clusters get-credentials"})," \u6703\u81ea\u52d5\u5e6b\u4f60\u8a2d\u7f6e\u53e2\u96c6\u548c\u4f7f\u7528\u8005\u7684\u8a2d\u5b9a\uff0c\u4f46\u5982\u679c\u4f60\u9700\u8981\u624b\u52d5\u8a2d\u5b9a\u6216\u66f4\u65b0 ",(0,t.jsx)(n.code,{children:"kubeconfig"}),"\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"set-cluster"})," \u548c ",(0,t.jsx)(n.code,{children:"set-credentials"})," \u6307\u4ee4\u3002"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"gcloud-container-clusters-set-cluster",children:(0,t.jsx)(n.code,{children:"gcloud container clusters set-cluster"})}),"\n",(0,t.jsxs)(n.p,{children:["\u9019\u500b\u6307\u4ee4\u7528\u4f86\u5c07\u53e2\u96c6\u7684\u9023\u63a5\u8cc7\u8a0a\u52a0\u5165\u5230 ",(0,t.jsx)(n.code,{children:"kubeconfig"}),"\uff0c\u4f8b\u5982 API \u4f3a\u670d\u5668\u4f4d\u5740\u3001\u6191\u8b49\u3001\u6388\u6b0a\u7b49\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"\u8a9e\u6cd5",children:"\u8a9e\u6cd5\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"gcloud container clusters set-cluster <CLUSTER_NAME> \\\n  --zone <ZONE> \\\n  --project <PROJECT_ID> \\\n  --certificate-authority <CA_FILE_PATH> \\\n  --server <API_SERVER_URL>\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u53c3\u6578",children:"\u53c3\u6578\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<CLUSTER_NAME>"})}),"\uff1aGKE \u53e2\u96c6\u7684\u540d\u7a31\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<ZONE>"})}),"\uff1a\u53e2\u96c6\u6240\u5728\u7684\u5340\u57df\u6216\u5340\u57df\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<PROJECT_ID>"})}),"\uff1aGoogle Cloud \u5c08\u6848 ID\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<CA_FILE_PATH>"})}),"\uff1a\u6191\u8b49\u6388\u6b0a\u7684\u8def\u5f91\uff0c\u901a\u5e38\u4f86\u81ea ",(0,t.jsx)(n.code,{children:"certificate-authority-data"}),"\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<API_SERVER_URL>"})}),"\uff1aKubernetes API \u4f3a\u670d\u5668\u7684 URL\uff0c\u901a\u5e38\u4ee5 ",(0,t.jsx)(n.code,{children:"https://"})," \u958b\u982d\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"\u7bc4\u4f8b",children:"\u7bc4\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"gcloud container clusters set-cluster my-cluster \\\n  --zone us-central1-a \\\n  --project my-project \\\n  --certificate-authority ./ca.crt \\\n  --server https://35.231.123.456\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u9019\u500b\u6307\u4ee4\u6703\u5c07 ",(0,t.jsx)(n.code,{children:"my-cluster"})," \u53e2\u96c6\u7684\u9023\u7dda\u8cc7\u8a0a\u6dfb\u52a0\u5230 ",(0,t.jsx)(n.code,{children:"kubeconfig"}),"\uff0c\u5305\u62ec API \u4f3a\u670d\u5668\u4f4d\u5740\u548c\u6191\u8b49\u3002"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"gcloud-container-clusters-set-credentials",children:(0,t.jsx)(n.code,{children:"gcloud container clusters set-credentials"})}),"\n",(0,t.jsx)(n.p,{children:"\u9019\u500b\u6307\u4ee4\u7528\u4f86\u8a2d\u5b9a\u8207 Kubernetes \u53e2\u96c6\u4e92\u52d5\u7684\u4f7f\u7528\u8005\u8a8d\u8b49\u8cc7\u8a0a\uff0c\u901a\u5e38\u7528\u65bc\u8a2d\u5b9a OAuth \u4ee4\u724c\u3001\u79c1\u5bc6\u91d1\u9470\u7b49\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"\u8a9e\u6cd5-1",children:"\u8a9e\u6cd5\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"gcloud container clusters set-credentials <USER_NAME> \\\n  --project <PROJECT_ID> \\\n  --zone <ZONE> \\\n  --token <ACCESS_TOKEN>\n"})}),"\n",(0,t.jsx)(n.h4,{id:"\u53c3\u6578-1",children:"\u53c3\u6578\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<USER_NAME>"})}),"\uff1a\u4f7f\u7528\u8005\u540d\u7a31\uff0c\u7528\u4f86\u8207 Kubernetes \u53e2\u96c6\u9032\u884c\u8a8d\u8b49\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<PROJECT_ID>"})}),"\uff1aGoogle Cloud \u5c08\u6848 ID\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<ZONE>"})}),"\uff1a\u53e2\u96c6\u6240\u5728\u7684\u5340\u57df\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<ACCESS_TOKEN>"})}),"\uff1a\u6388\u6b0a\u7684\u8a2a\u554f\u4ee4\u724c\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"\u7bc4\u4f8b-1",children:"\u7bc4\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"gcloud container clusters set-credentials developer \\\n  --project my-project \\\n  --zone us-central1-a \\\n  --token ABCDEFGHIJKLMNOPQRSTUVWXYZ12345\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u9019\u6703\u5c07 ",(0,t.jsx)(n.code,{children:"developer"})," \u4f7f\u7528\u8005\u7684\u8a2a\u554f\u4ee4\u724c\u6dfb\u52a0\u81f3 ",(0,t.jsx)(n.code,{children:"kubeconfig"}),"\u3002"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u7d50\u8ad6",children:"\u7d50\u8ad6"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Kubernetes Context"})," \u63d0\u4f9b\u4e86\u9748\u6d3b\u7684\u74b0\u5883\u7ba1\u7406\u65b9\u5f0f\uff0c\u4f7f\u958b\u767c\u8005\u8207\u7ba1\u7406\u54e1\u80fd\u5920\u8f15\u9b06\u5207\u63db\u4e0d\u540c\u53e2\u96c6\u8207\u7528\u6236\uff0c\u63d0\u9ad8\u64cd\u4f5c\u6548\u7387\u4e26\u964d\u4f4e\u932f\u8aa4\u98a8\u96aa\u3002"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var c=s(96540);const t={},r=c.createContext(t);function l(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),c.createElement(r.Provider,{value:n},e.children)}},77342:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/Context-e9268fb3ee108dbb50dd6b7820b06441.svg"}}]);